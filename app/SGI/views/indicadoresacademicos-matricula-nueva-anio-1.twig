{% extends "base.twig" %}
{% block title %}Matricula nueva de primer anio{% endblock %}
{% block contentheader %}Matrícula Nueva 1° Año{% endblock %}
{% block content %}
<section class="content">
	<div class="row">
		<section class="col-lg-12 connectedSortable">
			<div class="box box-success">
				<div class="box-header">
					<div class="box-tools pull-right" data-toggle="tooltip" title="Status">
					</div>
				</div>
				<div class="box-body chat" id="chat-box">
					<div class="row">
						<div class="col-xs-6" style="padding-left: 0px;padding-right: 0px">
							<div class="col-sx-12">
								<h4><center>Ingeniería Civil Metalúrgica</center></h4>
								<canvas id="canvas5"></canvas>
							</div>
							<div class="col-xs-4 col-sm-6">
								<button class="btn btn-block btn-primary" id="exportar_grafico5" style="margin-top: 20px;"><i class="fa fa-area-chart"></i> Exportar Gráfico</button>
								<br>
							</div>
						</div>

						<div class="col-xs-6" style="padding-left: 0px;padding-right: 0px">
							<div class="col-sx-12">
								<h4><center>Ingeniería Civil de Minas</center></h4>
								<canvas id="canvas6"></canvas>
							</div>
							<div class="col-xs-4 col-sm-6 col-xs-offset-8 col-sm-offset-6">
								<button class="btn btn-block btn-primary" id="exportar_grafico6" style="margin-top: 20px;"><i class="fa fa-area-chart"></i> Exportar Gráfico</button>
								<br>
							</div>
						</div>								
					</div>

					<div class="row">
						<div class="col-xs-12">
							<!-- tabla web, lo que se ve en la vista. No es la que se descarga -->
							<div class="table-responsive">
								<table class="table table-bordered table-responsive">
									<thead>
										<tr>
											<th colspan="29">Matrícula Nueva (de primer año) - Casa Central</th>
										</tr>
										<tr>
											<th colspan="3">Comuna</th>
											<th colspan="3">Jornada</th>
											<th colspan="3">Modalidad</th>
											<th colspan="4">2012</th>
											<th colspan="4">2013</th>
											<th colspan="4">2014</th>
											<th colspan="4">2015</th>
											<th colspan="4">2016</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td colspan="3"></td>
											<td colspan="3"></td>
											<td colspan="3"></td>
											<th>PAR</th>
											<th style="background-color: #0082D5; color: #FFF">AR</th>
											<th>PAE</th>
											<th style="background-color: #0082D5; color: #FFF">AE</th>
											<th>PAR</th>
											<th style="background-color: #0082D5; color: #FFF">AR</th>
											<th>PAE</th>
											<th style="background-color: #0082D5; color: #FFF">AE</th>
											<th>PAR</th>
											<th style="background-color: #0082D5; color: #FFF">AR</th>
											<th>PAE</th>
											<th style="background-color: #0082D5; color: #FFF">AE</th>
											<th>PAR</th>
											<th style="background-color: #0082D5; color: #FFF">AR</th>
											<th>PAE</th>
											<th style="background-color: #0082D5; color: #FFF">AE</th>
											<th>PAR</th>
											<th style="background-color: #0082D5; color: #FFF">AR</th>
											<th>PAE</th>
											<th style="background-color: #0082D5; color: #FFF">AE</th>	
										</tr>
										<tr>
											<td colspan="3">Valparaíso</td>
											<td colspan="3">Diurna</td>
											<td colspan="3">Presencial</td>
											<td>144</td>
											<td style="background-color: #0082D5; color: #FFF">44</td>
											<td>0</td>
											<td style="background-color: #0082D5; color: #FFF">0</td>
											<td>150</td>
											<td style="background-color: #0082D5; color: #FFF">47</td>
											<td>2</td>
											<td style="background-color: #0082D5; color: #FFF">2</td>
											<td>116</td>
											<td style="background-color: #0082D5; color: #FFF">60</td>
											<td>0</td>
											<td style="background-color: #0082D5; color: #FFF">0</td>
											<td>125</td>
											<td style="background-color: #0082D5; color: #FFF">61</td>
											<td>1</td>
											<td style="background-color: #0082D5; color: #FFF">1</td>
											<td>79</td>
											<td style="background-color: #0082D5; color: #FFF">58</td>
											<td>2</td>
											<td style="background-color: #0082D5; color: #FFF">2</td>	
										</tr>
										<tr>
											<th colspan="9">TOTAL DE LA SEDE EN EL AÑO</th>
											<td>144</td>
											<td style="background-color: #0082D5; color: #FFF">44</td>
											<td>0</td>
											<td style="background-color: #0082D5; color: #FFF">0</td>
											<td>150</td>
											<td style="background-color: #0082D5; color: #FFF">47</td>
											<td>2</td>
											<td style="background-color: #0082D5; color: #FFF">2</td>
											<td>116</td>
											<td style="background-color: #0082D5; color: #FFF">60</td>
											<td>0</td>
											<td style="background-color: #0082D5; color: #FFF">0</td>
											<td>125</td>
											<td style="background-color: #0082D5; color: #FFF">61</td>
											<td>1</td>
											<td style="background-color: #0082D5; color: #FFF">1</td>
											<td>79</td>
											<td style="background-color: #0082D5; color: #FFF">58</td>
											<td>2</td>
											<td style="background-color: #0082D5; color: #FFF">2</td>
										</tr>
										<tr>
											<th colspan="1">PAR</th>
											<td colspan="10" style="text-align: left;">Postulantes Admisión Regular</td>
										</tr>
										<tr>
											<th colspan="1">AR</th>
											<td colspan="10" style="text-align: left;">Admisión Regular</td>
										</tr>
										<tr>
											<th colspan="1">PAE</th>
											<td colspan="10" style="text-align: left;">Postulantes Admisión Especial</td>
										</tr>
										<tr>
											<th colspan="1">AE</th>
											<td colspan="10" style="text-align: left;">Admisión Especial</td>
										</tr>
									</tbody>
								</table>
							</div>
							<!-- tabla oculta, lo que se manda al boton de exportar tabla. 
							Es la misma tabla de arriba sin los estilos y clases.
							Los tags th se reemplazan con td.
							Los colspan y rowspan se ponen manualmente con tags <td> vacios.
							 -->
							<div style="display: none;">
								<table id="met29a">
									<tbody>
										<tr>
											<td>Matrícula Nueva (de primer año)</td>
										</tr>
										<tr>
											<td>Casa Central</td>
										</tr>
										<tr>
											<td>Comuna</td><td></td>
											<td>Jornada</td><td></td>
											<td>Modalidad</td><td></td>
											<td>2012</td><td></td><td></td><td></td>
											<td>2013</td><td></td><td></td><td></td>
											<td>2014</td><td></td><td></td><td></td>
											<td>2015</td><td></td><td></td><td></td>
											<td>2016</td><td></td><td></td><td></td>
										</tr>
										<tr>
											<td></td><td></td><td></td><td></td><td></td><td></td>
											<td>PAR</td>
											<td>AR</td>
											<td>PAE</td>
											<td>AE</td>
											<td>PAR</td>
											<td>AR</td>
											<td>PAE</td>
											<td>AE</td>
											<td>PAR</td>
											<td>AR</td>
											<td>PAE</td>
											<td>AE</td>
											<td>PAR</td>
											<td>AR</td>
											<td>PAE</td>
											<td>AE</td>
											<td>PAR</td>
											<td>AR</td>
											<td>PAE</td>
											<td>AE</td>	
										</tr>
										<tr>
											<td>Valparaíso</td><td></td>
											<td>Diurna</td><td></td>
											<td>Presencial</td><td></td>
											<td>144</td>
											<td>44</td>
											<td>0</td>
											<td>0</td>
											<td>150</td>
											<td>47</td>
											<td>2</td>
											<td>2</td>
											<td>116</td>
											<td>60</td>
											<td>0</td>
											<td>0</td>
											<td>125</td>
											<td>61</td>
											<td>1</td>
											<td>1</td>
											<td>79</td>
											<td>58</td>
											<td>2</td>
											<td>2</td>	
										</tr>
										<tr>
											<td>TOTAL DE LA SEDE EN EL AÑO</td><td></td><td></td><td></td><td></td><td></td>
											<td>144</td>
											<td>44</td>
											<td>0</td>
											<td>0</td>
											<td>150</td>
											<td>47</td>
											<td>2</td>
											<td>2</td>
											<td>116</td>
											<td>60</td>
											<td>0</td>
											<td>0</td>
											<td>125</td>
											<td>61</td>
											<td>1</td>
											<td>1</td>
											<td>79</td>
											<td>58</td>
											<td>2</td>
											<td>2</td>
										</tr>
										<tr>
											<td>PAR</td>
											<td>Postulantes Admisión Regular</td>
										</tr>
										<tr>
											<td>AR</td>
											<td>Admisión Regular</td>
										</tr>
										<tr>
											<td>PAE</td>
											<td>Postulantes Admisión Especial</td>
										</tr>
										<tr>
											<td>AE</td>
											<td>Admisión Especial</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="col-xs-2 col-sm-3">
							<button class="btn btn-block btn-primary" id="exportar_tabla29a"><i class="fa fa-table"></i> Exportar Tabla</button>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<h4><center>Postulantes y Admisiones (Regulares)</center></h4>
							<canvas id="canvas1" height="150" width="500"></canvas>
						</div>
						<div class="col-xs-2 col-sm-3">
							 <button class="btn btn-block btn-primary" id="exportar_grafico1"><i class="fa fa-area-chart"></i> Exportar Gráfico</button>
							 <br>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<h4><center>Postulantes y Admisiones (Especiales)</center></h4>
							<canvas id="canvas2" height="150" width="500"></canvas>
						</div>
						<div class="col-xs-2 col-sm-3">
							 <button class="btn btn-block btn-primary" id="exportar_grafico2"><i class="fa fa-area-chart"></i> Exportar Gráfico</button>
							 <br>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<!-- tabla web, lo que se ve en la vista. No es la que se descarga -->
							<div class="table-responsive">
								<table class="table table-bordered table-responsive">
									<thead>
										<tr>
											<th colspan="29">Cambios de Carrera - Ingeniería Civil Plan Común a Ingeniería Civil Metalúrgica</th>
										</tr>
										<tr>
											<th colspan="29">Casa Central</th>
										</tr>
										<tr>
											<th colspan="9">Año Ingreso USM</th>
											<th colspan="4">2012</th>
											<th colspan="4">2013</th>
											<th colspan="4">2014</th>
											<th colspan="4">2015</th>
											<th colspan="4">2016</th>
										</tr>
										<tr>
											<th colspan="9">Año de Cambio</th>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
										</tr>
									</thead>
									<tbody>
										<tr>
											<th colspan="9" style="background-color: #0082D5; color: #FFF;text-align: center">Cantidad de Alumnos</th>
											<td>0</td>
											<td>11</td>
											<td>0</td>
											<td>0</td>
											<td>7</td>
											<td>3</td>
											<td>2</td>
											<td>0</td>
											<td>0</td>
											<td>1</td>
											<td>1</td>
											<td>-</td>
											<td>4</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>
										</tr>
										<tr>
											<th colspan="9" style="text-align: center;">TOTAL DE LA SEDE EN EL AÑO</th>
											<th colspan="4" style="text-align: center;">11</th>
											<th colspan="4" style="text-align: center;">12</th>
											<th colspan="4" style="text-align: center;">2</th>
											<th colspan="4" style="text-align: center;">4</th>
											<th colspan="4" style="text-align: center;">0</th>
										</tr>
									</tbody>
								</table>
							</div>
							<!-- tabla oculta, lo que se manda al boton de exportar tabla. 
							Es la misma tabla de arriba sin los estilos y clases.
							Los tags th se reemplazan con td.
							Los colspan y rowspan se ponen manualmente con tags <td> vacios.
							 -->
							<div style="display: none;">
								<table id="met29b">
									<tbody>
										<tr>
											<td>Cambios de Carrera - Ingeniería Civil Plan Común a Ingeniería Civil Metalúrgica</td>
										</tr>
										<tr>
											<td>Casa Central</td>
										</tr>
										<tr>
											<td>Año Ingreso USM</td><td></td><td></td>
											<td>2012</td><td></td><td></td><td></td>
											<td>2013</td><td></td><td></td><td></td>
											<td>2014</td><td></td><td></td><td></td>
											<td>2015</td><td></td><td></td><td></td>
											<td>2016</td><td></td><td></td><td></td>
										</tr>
										<tr>
											<td>Año de Cambio</td><td></td><td></td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
										</tr>
										<tr>
											<td>Cantidad de Alumnos</td><td></td><td></td>
											<td>0</td>
											<td>11</td>
											<td>0</td>
											<td>0</td>
											<td>7</td>
											<td>3</td>
											<td>2</td>
											<td>0</td>
											<td>0</td>
											<td>1</td>
											<td>1</td>
											<td>-</td>
											<td>4</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>
										</tr>
										<tr>
											<td>TOTAL DE LA SEDE EN EL AÑO</td><td></td><td></td>
											<td>11</td><td></td><td></td><td></td>
											<td>12</td><td></td><td></td><td></td>
											<td>2</td><td></td><td></td><td></td>
											<td>4</td><td></td><td></td><td></td>
											<td>0</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="col-xs-2 col-sm-3">
							<button class="btn btn-block btn-primary" id="exportar_tabla29b"><i class="fa fa-table"></i> Exportar Tabla</button>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<h4><center>Cambios de Ingeniería Civil Plan Común a Ingeniería Civil Metalúrgica (Casa Central)</center></h4>
						</div>
						<div class="col-xs-12">
							<canvas id="canvas3" height="150" width="500"></canvas>
						</div>
						<div class="col-xs-2 col-sm-3">
							<button class="btn btn-block btn-primary" id="exportar_grafico3"><i class="fa fa-area-chart"></i> Exportar Gráfico</button>
							 <br>
						</div>
						<div class="col-xs-12">
							<table class="table table-bordered table-hover" id="tabla">
								<thead>
									<tr>
										<th></th>
										<th>2012</th>
										<th>2013</th>
										<th>2014</th>
										<th>2015</th>
										<th>2016</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>TOTAL</td>
										<td>11</td>
										<td>12</td>
										<td>2</td>
										<td>4</td>
										<td>0</td>
									<tr>
								</tbody>
							</table>
						</div>
						<div class="col-xs-2 col-sm-3">
							<button class="btn btn-block btn-primary" id="exportar_tabla"><i class="fa fa-table"></i> Exportar Tabla</button>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12">
							<!-- tabla web, lo que se ve en la vista. No es la que se descarga -->
							<div class="table-responsive">
								<table class="table table-bordered table-responsive">
									<thead>
										<tr>
											<th colspan="29">Cambios de Carrera - Otras a Ingeniería Civil Metalúrgica</th>
										</tr>
										<tr>
											<th colspan="29">Casa Central</th>
										</tr>
										<tr>
											<th colspan="9">Año Ingreso USM</th>
											<th colspan="4">2012</th>
											<th colspan="4">2013</th>
											<th colspan="4">2014</th>
											<th colspan="4">2015</th>
											<th colspan="4">2016</th>
										</tr>
										<tr>
											<th colspan="9">Año de Cambio</th>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
										</tr>
									</thead>
									<tbody>
										<tr>
											<th colspan="9" style="background-color: #0082D5; color: #FFF;text-align: center">Cantidad de Alumnos</th>
											<td>0</td>
											<td>0</td>
											<td>0</td>
											<td>2</td>
											<td>0</td>
											<td>1</td>
											<td>2</td>
											<td>0</td>
											<td>0</td>
											<td>0</td>
											<td>0</td>
											<td>-</td>
											<td>0</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>
										</tr>
										<tr>
											<th colspan="9" style="text-align: center;">TOTAL DE LA SEDE EN EL AÑO</th>
											<th colspan="4" style="text-align: center;">2</th>
											<th colspan="4" style="text-align: center;">3</th>
											<th colspan="4" style="text-align: center;">0</th>
											<th colspan="4" style="text-align: center;">0</th>
											<th colspan="4" style="text-align: center;">0</th>
										</tr>
									</tbody>
								</table>
							</div>
							<!-- tabla oculta, lo que se manda al boton de exportar tabla. 
							Es la misma tabla de arriba sin los estilos y clases.
							Los tags th se reemplazan con td.
							Los colspan y rowspan se ponen manualmente con tags <td> vacios.
							 -->
							<div style="display: none;">
								<table id="met29c">
									<tbody>
										<tr>
											<td>Cambios de Carrera - Otras a Ingeniería Civil Metalúrgica</td>
										</tr>
										<tr>
											<td>Casa Central</td>
										</tr>
										<tr>
											<td>Año Ingreso USM</td><td></td><td></td>
											<td>2012</td><td></td><td></td><td></td>
											<td>2013</td><td></td><td></td><td></td>
											<td>2014</td><td></td><td></td><td></td>
											<td>2015</td><td></td><td></td><td></td>
											<td>2016</td><td></td><td></td><td></td>
										</tr>
										<tr>
											<td>Año de Cambio</td><td></td><td></td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
											<td>1</td>
											<td>2</td>
											<td>3</td>
											<td>4+</td>
										</tr>
										<tr>
											<td>Cantidad de Alumnos</td><td></td><td></td>
											<td>0</td>
											<td>0</td>
											<td>0</td>
											<td>2</td>
											<td>0</td>
											<td>1</td>
											<td>2</td>
											<td>0</td>
											<td>0</td>
											<td>0</td>
											<td>0</td>
											<td>-</td>
											<td>0</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>0</td>
											<td>-</td>
											<td>-</td>
											<td>-</td>
										</tr>
										<tr>
											<td>TOTAL DE LA SEDE EN EL AÑO</td><td></td><td></td>
											<td>2</td><td></td><td></td><td></td>
											<td>3</td><td></td><td></td><td></td>
											<td>0</td><td></td><td></td><td></td>
											<td>0</td><td></td><td></td><td></td>
											<td>0</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="col-xs-2 col-sm-3">
							<button class="btn btn-block btn-primary" id="exportar_tabla29c"><i class="fa fa-table"></i> Exportar Tabla</button>
						</div>
					</div>							
					<div class="row">
						<div class="col-xs-12">
							<h4><center>Cambios de Otras Carreras a Ingeniería Civil Metalúrgica</center></h4>
						</div>
						<div class="col-xs-12">
							<canvas id="canvas4" height="150" width="500"></canvas>
						</div>
						<div class="col-xs-2 col-sm-3">
							 <button class="btn btn-block btn-primary" id="exportar_grafico4"><i class="fa fa-area-chart"></i> Exportar Gráfico</button>
							 <br>
						</div>
						<div class="col-xs-12">
							<table class="table table-bordered table-hover" id="tabla2">
								<thead>
									<tr>
										<th></th>
										<th>2012</th>
										<th>2013</th>
										<th>2014</th>
										<th>2015</th>
										<th>2016</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>TOTAL</td>
										<td>2</td>
										<td>3</td>
										<td>0</td>
										<td>0</td>
										<td>0</td>
									<tr>
								</tbody>
							</table>
						</div>
						<div class="col-xs-2 col-sm-3">
							<button class="btn btn-block btn-primary" id="exportar_tabla2"><i class="fa fa-table"></i> Exportar Tabla</button>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</section>
<div style="font-size:0;height:2750px;"></div>

<input id="csrf" type="hidden" name="{{csrf_key}}" value="{{csrf_token}}">
{% endblock %}
{% block scripts %}
<script src="{{ baseUrl() }}/js/xlsx.core.min.js"></script>
<script src="{{ baseUrl() }}/js/Blob.js"  type="text/javascript"></script>
<script src="{{ baseUrl() }}/js/FileSaver.js"  type="text/javascript"></script>
<script src="{{ baseUrl() }}/js/tabla.js"  type="text/javascript"></script>
<script src="{{ baseUrl() }}/js/bootstrap-datepicker.js"></script>
<script src="{{ baseUrl() }}/js/jquery.table2excel.js"></script>
<script src="{{ baseUrl() }}/js/ChartNew.js"></script>
<script>
$("#exportar_tabla").on('click', function(){
		/*$("#tabla").table2excel({
			exclude: ".noExl",
			name: "Worksheet Name",
			filename: "Estudiantes programas doctorado real.xls"


		});*/
		export_table_to_excel('tabla', 'Estudiantes programas doctorado real');
});
$("#exportar_tabla2").on('click', function(){
		/*$("#tabla2").table2excel({
			exclude: ".noExl",
			name: "Worksheet Name",
			filename: "Estudiantes programas doctorado proyectado.xls"

		});*/
		export_table_to_excel('tabla2', 'Estudiantes programas doctorado proyectado');
});
$("#exportar_tabla29a").on('click', function(){
		/*$("#tabla2").table2excel({
			exclude: ".noExl",
			name: "Worksheet Name",
			filename: "Estudiantes programas doctorado proyectado.xls"

		});*/
		export_table_to_excel('met29a', 'Matricula nueva de primer año');
});
$("#exportar_tabla29b").on('click', function(){
		/*$("#tabla2").table2excel({
			exclude: ".noExl",
			name: "Worksheet Name",
			filename: "Estudiantes programas doctorado proyectado.xls"

		});*/
		export_table_to_excel('met29b', 'Cambios de Carrera - Ingeniería Civil Plan Común a Ingeniería Civil Metalúrgica');
});
$("#exportar_tabla29c").on('click', function(){
		/*$("#tabla2").table2excel({
			exclude: ".noExl",
			name: "Worksheet Name",
			filename: "Estudiantes programas doctorado proyectado.xls"

		});*/
		export_table_to_excel('met29c', 'Cambios de Carrera - Otras a Ingeniería Civil Metalúrgica');
});

$("#exportar_grafico").on('click', function(){
		$("#canvas").mousedown();
});
</script>
<script>
// Canvas 1
var myBarChart1;
var data1 = {
	labels: ["2012", "2013", "2014", "2015", "2016"],
	datasets: [
		{
            label: "Postulantes Admisión Regular",
            fillColor: "#ff9c43",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [144,150,116,125,79]
        },
        {
            label: "Admisión Regular",
            fillColor: "#ffc999",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [44,47,60,61,58]
        }
 ]

};
var ctx1 = $("#canvas1").get(0).getContext("2d");
myBarChart1 = new Chart(ctx1).Bar(data1, {
responsive: true,
bezierCurve : false,
datasetFill : false,

scaleOverride : true,
scaleSteps : 5,
scaleStepWidth : Math.ceil(Math.max.apply(Math,[Math.max.apply(Math,data1.datasets[0].data),Math.max.apply(Math,data1.datasets[1].data)])/5),
scaleStartValue : 0 ,

legend : true,
savePng : true,
savePngOutput: "Save",
xAxisLabel: "Años",
yAxisLabel: "Número de Postulaciones y Admisiones",
annotateDisplay : true,
annotateLabel: "<%= v1 %> - <%= v3 %>",
});

$("#exportar_grafico1").on('click', function(){
	$.ajax({
	url:'../api/save_canvas',
	type:'POST',
	data:{
			data:document.getElementById("canvas1").toDataURL("image/png"),
			csrf_token: $("#csrf").val()
	}

}).success(function(data){
	var a = document.createElement('a');
	a.href = "../img/grafico.png";
	a.download = "grafico.png";
	document.body.appendChild(a);
	a.click();
	document.body.removeChild(a);
});
});

// Canvas 2
var myBarChart2;
var data2 = {
	labels: ["2012", "2013", "2014", "2015", "2016"],
	datasets: [
        {
            label: "Postulantes Admisión Especial",
            fillColor: "#ff9c43",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [0,2,0,1,2]
        },        
		{
		    label: "Admisión Especial",
		    fillColor: "#ffc999",
		    strokeColor: "rgba(220,220,220,0.8)",
		    highlightFill: "rgba(220,220,220,0.75)",
		    highlightStroke: "rgba(220,220,220,1)",
		    data: [0,2,0,1,2]
		}
 ]

};
var ctx2 = $("#canvas2").get(0).getContext("2d");
myBarChart2 = new Chart(ctx2).Bar(data2, {
responsive: true,
bezierCurve : false,
datasetFill : false,

scaleOverride : true,
scaleSteps : 5,
scaleStepWidth : Math.ceil(Math.max.apply(Math,[Math.max.apply(Math,data2.datasets[0].data),Math.max.apply(Math,data2.datasets[1].data)])/5),
scaleStartValue : 0,

legend : true,
savePng : true,
savePngOutput: "Save",
xAxisLabel: "Años",
yAxisLabel: "Número de Postulaciones y Admisiones",
annotateDisplay : true,
annotateLabel: "<%= v1 %> - <%= v3 %>",
});

$("#exportar_grafico2").on('click', function(){
	$.ajax({
	url:'../api/save_canvas',
	type:'POST',
	data:{
			data:document.getElementById("canvas2").toDataURL("image/png"),
			csrf_token: $("#csrf").val()
	}

}).success(function(data){
	var a = document.createElement('a');
	a.href = "../img/grafico.png";
	a.download = "grafico.png";
	document.body.appendChild(a);
	a.click();
	document.body.removeChild(a);
});
});

// Canvas 3
var myBarChart3;
var data3 = {
	labels: ["2012", "2013", "2014", "2015", "2016"],
	datasets: [
		{
            label: "Cambio al primer año",
            fillColor: "#cc5f00",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [0,7,0,4,0]
        },
        {
            label: "Cambio al segundo año",
            fillColor: "#ff7700",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [11,3,1,0,0]
        },
        {
            label: "Cambio al tercer año",
            fillColor: "#ff9c43",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [0,2,1,0,0]
        },
        {
            label: "Cambio al cuarto año (o superior)",
            fillColor: "#ffc999",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [0,0,0,0,0]
        }        

 ]

};
var ctx3 = $("#canvas3").get(0).getContext("2d");
myBarChart3 = new Chart(ctx3).Bar(data3, {
responsive: true,
bezierCurve : false,
datasetFill : false,

scaleOverride : true,
scaleSteps : 5,
scaleStepWidth : Math.ceil(Math.max.apply(Math,[Math.max.apply(Math,data3.datasets[0].data),Math.max.apply(Math,data3.datasets[1].data),Math.max.apply(Math,data3.datasets[2].data),Math.max.apply(Math,data3.datasets[3].data)])/5),
scaleStartValue : 0,

legend : true,
savePng : true,
savePngOutput: "Save",
xAxisLabel: "Año de Ingreso USM",
yAxisLabel: "Número de Alumnos",
annotateDisplay : true,
annotateLabel: "<%= v1 %> - <%= v3 %>",
});

$("#exportar_grafico3").on('click', function(){
	$.ajax({
	url:'../api/save_canvas',
	type:'POST',
	data:{
			data:document.getElementById("canvas3").toDataURL("image/png"),
			csrf_token: $("#csrf").val()
	}

}).success(function(data){
	var a = document.createElement('a');
	a.href = "../img/grafico.png";
	a.download = "grafico.png";
	document.body.appendChild(a);
	a.click();
	document.body.removeChild(a);
});
});

// Canvas 4
var myBarChart4;
var data4 = {
	labels: ["2012", "2013", "2014", "2015", "2016"],
	datasets: [
        {
            label: "Cambio al primer año",
            fillColor: "#cc5f00",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [0,0,0,0,0]
        },        
		{
		    label: "Cambio al segundo año",
		    fillColor: "#ff7700",
		    strokeColor: "rgba(220,220,220,0.8)",
		    highlightFill: "rgba(220,220,220,0.75)",
		    highlightStroke: "rgba(220,220,220,1)",
		    data: [0,1,0,0,0]
		},
		{
            label: "Cambio al tercer año",
            fillColor: "#ff9c43",
            strokeColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            highlightStroke: "rgba(220,220,220,1)",
            data: [0,2,0,0,0]
        },        
		{
		    label: "Cambio al cuarto año (o superior)",
		    fillColor: "#ffc999",
		    strokeColor: "rgba(220,220,220,0.8)",
		    highlightFill: "rgba(220,220,220,0.75)",
		    highlightStroke: "rgba(220,220,220,1)",
		    data: [2,0,0,0,0]
		}
 ]

};
var ctx4 = $("#canvas4").get(0).getContext("2d");
myBarChart4 = new Chart(ctx4).Bar(data4, {
responsive: true,
bezierCurve : false,
datasetFill : false,

scaleOverride : true,
scaleSteps : 5,
// scaleStepWidth es igual al máximo valor numerico de los datasets dividido por 5 aproximado hacia arriba. Requiere que ningun dataset tenga valores nulos o no numericos.
scaleStepWidth : Math.ceil(Math.max.apply(Math,[Math.max.apply(Math,data4.datasets[0].data),Math.max.apply(Math,data4.datasets[1].data),Math.max.apply(Math,data4.datasets[2].data),Math.max.apply(Math,data4.datasets[3].data)])/5),
scaleStartValue : 0,

legend : true,
savePng : true,
savePngOutput: "Save",
xAxisLabel: "Año de Ingreso USM",
yAxisLabel: "Número de Alumnos",
annotateDisplay : true,
annotateLabel: "<%= v1 %> - <%= v3 %>",
});

$("#exportar_grafico4").on('click', function(){
	$.ajax({
	url:'../api/save_canvas',
	type:'POST',
	data:{
			data:document.getElementById("canvas4").toDataURL("image/png"),
			csrf_token: $("#csrf").val()
	}

}).success(function(data){
	var a = document.createElement('a');
	a.href = "../img/grafico.png";
	a.download = "grafico.png";
	document.body.appendChild(a);
	a.click();
	document.body.removeChild(a);
});
});

// Canvas 5 (MET)
var MyPieChart5;
var data5 = [
		{
            color: '#3cbdbc',
            value: [42],
            label: 'Hombres'
        },
        {
            color: '#cc5f00',
            value: [19],
            label: 'Mujeres'
        }
];
var ctx5 = $("#canvas5").get(0).getContext("2d");
MyPieChart5 = new Chart(ctx5).Pie(data5,{
	responsive: true,
	legend : true,
	savePng : true,
	savePngOutput: "Save",
	annotateDisplay : true,
	annotateLabel: "<%= v1 %> - <%= v2 %> (<%=Math.round(100*v2/v4)%>%)",
});

$("#exportar_grafico5").on('click', function(){
	$.ajax({
		url:'../api/save_canvas',
		type:'POST',
		data:{
			data:document.getElementById("canvas5").toDataURL("image/png"),
			csrf_token: $("#csrf").val()
		}
	}).success(function(data){
		var a = document.createElement('a');
		a.href = "../img/grafico.png";
		a.download = "grafico.png";
		document.body.appendChild(a);
		a.click();
		document.body.removeChild(a);
	});
});

// Canvas 6 (MIN)
var MyPieChart6;
var data6 = [
		{
            color: '#3cbdbc',
            value: [93],
            label: 'Hombres'
        },
        {
            color: '#cc5f00',
            value: [32],
            label: 'Mujeres'
        }
];
var ctx6 = $("#canvas6").get(0).getContext("2d");
MyPieChart6 = new Chart(ctx6).Pie(data6,{
	responsive: true,
	legend : true,
	savePng : true,
	savePngOutput: "Save",
	annotateDisplay : true,
	annotateLabel: "<%= v1 %> - <%= v2 %> (<%=Math.round(100*v2/v4)%>%)",
});

$("#exportar_grafico6").on('click', function(){
	$.ajax({
		url:'../api/save_canvas',
		type:'POST',
		data:{
			data:document.getElementById("canvas6").toDataURL("image/png"),
			csrf_token: $("#csrf").val()
		}
	}).success(function(data){
		var a = document.createElement('a');
		a.href = "../img/grafico.png";
		a.download = "grafico.png";
		document.body.appendChild(a);
		a.click();
		document.body.removeChild(a);
	});
});

</script>
{% endblock %}
